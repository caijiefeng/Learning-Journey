# t265

t265是英特尔公司的一种支持实感技术的追踪相机，可为用户提供现成可用的追踪性能，可满足所有机器人、无人机和增强现实快速原型制作的需求。

t265采用 V-SLAM 算法将摄像头和 IMU 结合起来，利用环境中的视觉特征，保证在未知空间中也能精确追踪其路径。

同时t265搭载了两个鱼眼镜头传感器、一个 IMU （内置陀螺仪和加速度计）和一个英特尔® Movidius™ Myriad™ 2 VPU。所有的 V‑SLAM 算法都直接在 VPU 上运行，能够实现非常低的延迟和非常高效的功耗。

下面这张图显示了一个t265相机：

![t265相机](https://docs.px4.io/main/assets/img/t265_intel_realsense_tracking_camera_photo_angle.730fdf4f.jpg)



这个相机与VIO配合使用可以代替PX4上的其它定位里程计为PX4提供里程计信息，通常在GPS模块不可使用/不可靠时会使用相机代替，此时VIO和t265对于飞控而言便至关重要。

[Intel® RealSense™ Tracking Camera T265](https://www.intelrealsense.com/tracking-camera-t265/)将为你提供t265以及其它相机的购买渠道，现在t265已经停产。

t265应该尽可能地（朝向）向下安装，相机的镜头要保证不会被遮挡，使用软安装（隔振安装），因为相机对振动非常敏感。此外，在强光/弱光场景下，t265的定位效果会减弱。



VIO提供了一个[VIO bridge ROS node](https://github.com/Auterion/VIO_bridge)，这个节点会为ROS与t265的通信提供桥梁（[realsense-ros](https://github.com/IntelRealSense/realsense-ros)将相机获取到的位姿信息发布到ROS topic上，[VIO bridge ROS node](https://github.com/Auterion/VIO_bridge)订阅这个topic最后再由[MAVROS](https://github.com/mavlink/mavros/)转化为MAVLink发给飞控），接下来的指引将告诉你如何在VIO中设置t265相机。

下面是t265的坐标图：

![t265坐标图](https://github.com/N-XIX-L/RM-Drone-Tutorial/blob/master/2022/img/T265_sensor_extrinsics.png)

实际上t265在ROS中发布的link坐标和官方提供的图片并不一致，在ROS中t265发布的camera_link、camera_pose_frame、camera_odom_frame均为前左上坐标系。这个前左上是相对于官方提供的t265摆放位置而言的。

在VIO包内的```bridge.launch```中配置你的相机方向：

```xml
<node pkg="tf" type="static_transform_publisher" name="tf_baseLink_cameraPose"
    args="0 0 0 0 1.5708 0 base_link camera_pose_frame 1000"/>
<!-- 这实现了将相机的tf坐标系到无人机base_link坐标系的静态变换，通常将无人机的base_link认作飞控中心，前面三个参数代表xyz方向的相对偏移，后面三个参数代表yaw、pitch、roll三个旋转轴上的相对偏移  -->
```



下面列举了t265的一些特点：

> 1. 在弱光和强光下定位效果不好
> 2. 周围环境特征点多，越复杂定位精度越高
> 3. 沿着相机坐标轴运动时，轨迹可能会产生漂移，也可能不产生
> 4. 动态环境下，大量车人走动SLAM难以创建标记映射
> 5. 高速运动下可能会产生大量无用数据

结合这些特点，在飞行时尽量选择特征点多或者手动增加特征点并且光线充足的地方，在t265上电之后尽量前后左右移动t265让t265收集尽可能多的特征点以此获得更好的飞行效果。
