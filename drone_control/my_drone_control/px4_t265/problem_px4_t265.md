目前已经在upboard上跑通了VIO以及vision_to_mavros，成功实现了mavros 与Pixhawk通信，并且可以在QGC上看到正确的位姿信息正在传输，软件层面上的问题已经解决。

### **待解决的问题**

**Problem1：**

t265的方案需要更换毕竟这个相机已经停产而且已经停止维护，新的方案初步确定是D435和t265一起使用，已经在学习中

**Problem2：**

mavros的传输会随机停止，推测和电路板有关

**Problem3：**

在起飞后无人机的位姿数据会变得不正常，推测有几种可能：１.相机振动太大，但已经使用了减震装置依然没有好的表现，可能需要使用软安装 2.upboard性能不够丢失数据（可能性不大），准备使用nuc进行测试 3.t265自身问题，准备更换相机进行测试 4.在电机高速旋转时电池电压发生了变化使得设备不正常地工作 5.由于无法连接wifi导致终端的情况无法观察，暂时无法排查飞行途中终端是否有错误信息　这个问题是当下最重要需要尽快解决的

**Problem4：**

小无人机的脚架根本不足够支撑小无人机降落容易侧翻导致损坏螺旋桨甚至电机，需要安装减震或者更改脚架

**Problem5：**

nuc的网卡没法扫出wifi也没法连接wifi，upboard没有网卡，无人机的调试和飞行中测试能够连接wifi是很有必要的，能够使用ssh连接机载电脑可以在飞行中观察到终端的情况，需要购买新网卡

**Problem6：**

大飞机在起飞之后nuc会和飞控断开联系，表现为QGC上出现*connection to mission computer lost!*的警告并且飞控不能再获取到t265的位姿数据，目前猜测是nuc的usb口接触不良导致

以上就是截止目前需要解决的问题。

### 已经解决的问题

**Problem1：**

还在学习中~~~

**Problem2：**

目前这个问题频率不高，而且大部分时候是出现在无人机着陆后可能是着陆瞬间机身大幅度的震动导致，但这不是当下首要的问题，所以还没有展开针对性的测试

新的测试中发现似乎？在电池电量下降时mavros停死的概率会增加，不过仍然需要进一步的测试来确定

**Problem3：**

彻底排查了4这种可能性，卸桨之后在无人机高速旋转的情况下移动无人机发现位姿数据正常

2可能性也不大但使用nuc测试依旧很有必要，推测会和upboard的表现一样，后续也会用nuc淘汰upboard

3的可能性也基本排除，长时间静止状态下t265的数据表现正常，手动快速/缓慢移动无人机t265的数据也基本正常，但不排除使用了新t265会有更好的表现的可能性，事实证明使用了新的t265也是一样的表现，位姿数据在起飞后开始漂，而且漂的幅度越来越大，3的可能性排除

在飞行中观察终端很有必要，5不论是不是原因所在都需要整改，而且新的测试中发现当位姿数据漂的很厉害时过段时间直接接收不到t265的位姿数据，相机相关的话题也听不到消息，可是mavros依然成功与飞控连接上，根据经验来说振动只会导致位姿数据漂，可是不会导致停止传输位姿数据，所以让nuc和upboard连网观察终端确定问题所在并解决这个问题非常有必要

1仍然具有最大可能性而且相当大，准备使用气压计定高在定高模式下飞行观察数据是否正常（这个方法可以排除手动飞行技术不好导致无人机晃动幅度太大造成t265报错slam error speed），后来测试中发现即使是在使用气压计定高的情况下，飞行过程中始终保持机身稳定时位姿数据依然会漂，现在给t265使用了软安装的方式减小振动准备进行新的测试

这个问题已经解决，加装了减震之后的相机数据不再漂，可以做到室内稳定悬停

**Problem4：**

已经跟机械负责人沟通了这个问题，但估计要等上一段时间了，所以近期飞行注意一下不要太快着陆吧，呜呜

**Problem5：**

和Proble3中5提到的一样，这个问题必须解决

**Problem6：**

已经尝试过在604跑过一整个下午，并且多次测试确保了飞控和nuc的通信正常且不会出现上述情况，只有在大飞机装上了螺旋桨后起飞才会出现这种问题，推测是螺旋桨转动带来的振动导致接口出现接触不良，现在已经使用热熔胶、扎带的方式尽可能地减少这种振动带来的影响，还有待测试

经过新的测试后发现确实是因为接触不良的原因导致的飞控与nuc断开连接，现在可以实现室内定位飞行了

不过这个问题想要彻底解决还得看终端输出，也就是在飞行中远程查看终端很有必要

---

**现在已经在空中上成功实现了室内定位飞行，px4使用t265并配套nuc的方案基本完成**

